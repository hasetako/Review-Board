<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">

<head>
	<meta charset="UTF-8">
	<title th:text="'カテゴリ: ' + ${category.categoryName}">カテゴリ別レビュー</title>
	<!-- 各ページで直接 Bootstrap を読み込む -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<style>
		/* 既存の最低限のクラスは残しておく（thumbサイズ等） */
		.thumb {
			width: 96px;
			height: 96px;
			object-fit: cover;
			border-radius: 6px;
			border: 1px solid #eee;
		}

		a.title {
			font-weight: bold;
			text-decoration: none;
		}
	</style>
</head>

<body>
	<!-- 共通ヘッダーを適用 -->
	<div th:replace="fragments/header :: siteHeader(${ 'カテゴリ: ' + category.categoryName })"></div>

	<div class="container my-4">
		<div th:if="${#lists.isEmpty(reviews)}" class="alert alert-info">
			このカテゴリに該当するレビューはまだありません。
		</div>

		<!--    test-->
		<section class="search-results">
			<p>検索結果：<strong th:text="${reviews.size()} + '件'" ></strong> 見つかりました</p>
			<!-- 検索結果一覧 -->
		</section>

		<!-- カードリスト（Bootstrap） -->
		<div class="row gy-4">
			<!-- スマホなどは１列PCでは２列に変更する -->
			<div class="col-12 col-md-6" th:each="r : ${reviews}">

				<!-- レビュー間余白 -->
				<div class="card shadow-sm mb-3">
					<div class="card-body d-flex gap-3 align-items-start">
						<img class="thumb" th:if="${r.contents.thumbnail}" th:src="${r.contents.thumbnail}" alt="thumb">
						<div class="flex-grow-1">
							<!-- TOPの見た目に合わせて詳細リンク -->
							<h5 class="card-title mb-1">
								<a class="title" th:href="@{|/reviews/${r.reviewId}|}"
									th:text="${r.reviewTitle}">レビュータイトル</a>
							</h5>
							<div class="mb-2 text-muted small">
								<span th:text="'評価: ' + ${r.rate} + ' / 5'"></span>
								<!-- 投稿者名リンク化（既対応維持） -->
								<span th:if="${r.user}">
									｜投稿者:
									<a th:href="@{|/user/${r.user.id}|}" th:text="${r.user.username}">username</a>
								</span>
							</div>
							<div>
								<a th:text="${r.contents.contentsTitle}">記事タイトル</a>
							</div>
						</div>
					</div>
				</div><!-- /card -->
			</div><!-- /col -->
		</div><!-- /row -->
	</div>

	<!--ページネーション-->
<!--	<nav aria-label="Page navigation example">-->
<!--		<ul class="pagination justify-content-center">-->
<!--			<li class="page-item disabled">-->
<!--				<a class="page-link">Previous</a>-->
<!--			</li>-->
<!--			<li class="page-item"><a class="page-link" href="#">1</a></li>-->
<!--			<li class="page-item"><a class="page-link" href="#">2</a></li>-->
<!--			<li class="page-item"><a class="page-link" href="#">3</a></li>-->
<!--			<li class="page-item disabled"><span class="page-link">…</span></li>-->
<!--			<li class="page-item"><a class="page-link" href="#">30</a></li>-->
<!--			<li class="page-item">-->
<!--				<a class="page-link" href="#">Next</a>-->
<!--			</li>-->
<!--		</ul>-->
<!--	</nav>-->

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
</body>

</html>